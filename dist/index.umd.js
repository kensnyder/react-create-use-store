!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],e):e((t=t||self).reactCreateUseStore={},t.react)}(this,function(t,e){var n=1;t.createStore=function(t){var e=t.state,o=void 0===e?{}:e,u=t.actions,i=t.autoReset,r=void 0!==i&&i,s=t.onFirstUse,c=void 0===s?function(){}:s,f=t.afterFirstMount,a=void 0===f?function(){}:f,d=t.afterEachMount,v=void 0===d?function(){}:d,h=t.afterEachUnmount,b=void 0===h?function(){}:h,l=t.afterLastUnmount,p=void 0===l?function(){}:l,x=t.id,S=[],m=[],_={reset:function(){return g(o)},state:o,setState:g,nextState:function(){return new Promise(function(t){m.push(t)})},actions:void 0===u?{}:u,id:String((void 0===x?null:x)||"store-"+n),idx:n++,_subscribe:function(t){0==_._usedCount++&&c(),0===S.length&&a(),-1===S.indexOf(t)&&(S.push(t),v())},_unsubscribe:function(t){var e=S.indexOf(t);e>-1&&S.splice(e,1),b(),0===S.length&&(r&&_.reset(),p())},_usedCount:0};return _;function g(t){"function"==typeof t&&(t=t(_.state)),Promise.resolve().then(function(){_.state=t,S.forEach(function(t){return t(_.state)}),m.forEach(function(t){return t(_.state)}),m.length=0}).catch(function(t){throw t})}},t.useStore=function(t){var n=e.useState(t.state)[1];return e.useDebugValue(t),e.useEffect(function(){return t._subscribe(n),function(){return t._unsubscribe(n)}},[t]),{state:t.state,actions:t.actions,reset:t.reset,nextState:t.nextState}}});
//# sourceMappingURL=index.umd.js.map
