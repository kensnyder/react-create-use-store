!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],e):e(t.reactCreateUseStore={},t.react)}(this,function(t,e){var n=1;t.createStore=function(t){var e=t.state;void 0===e&&(e={});var o=t.actions;void 0===o&&(o={});var r=t.autoReset;void 0===r&&(r=!1);var u=t.onFirstUse;void 0===u&&(u=function(){});var i=t.afterFirstMount;void 0===i&&(i=function(){});var a=t.afterEachMount;void 0===a&&(a=function(){});var s=t.afterEachUnmount;void 0===s&&(s=function(){});var c=t.afterLastUnmount;void 0===c&&(c=function(){});var f=t.id;void 0===f&&(f=null);var d=[],v=[],h={reset:function(){return p(e)},addActions:b,state:e,setState:p,nextState:function(){return new Promise(function(t){v.push(t)})},actions:{},id:String(f||"store-"+n),idx:n++,_subscribe:function(t){0==h._usedCount++&&u([h.state,p]),0===d.length&&i([h.state,p]),-1===d.indexOf(t)&&(d.push(t),a([h.state,p]))},_unsubscribe:function(t){d=d.filter(function(e){return e!==t}),s([h.state,p]),0===d.length&&(r&&h.reset(),c([h.state,p]))},_usedCount:0};return b(o),h;function b(t){Object.keys(t).forEach(function(e){var n=t[e];h.actions[e]=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return n.apply(void 0,[[h.state,p]].concat(t))}})}function p(t){"function"==typeof t&&(t=t(h.state)),Promise.resolve().then(function(){h.state=t,d.forEach(function(t){return t(h.state)}),v.forEach(function(t){return t(h.state)}),v=[]}).catch(function(t){throw t})}},t.useStore=function(t){var n=e.useState(t.state)[1];return e.useDebugValue(t),e.useEffect(function(){return t._subscribe(n),function(){return t._unsubscribe(n)}},[t]),{state:t.state,actions:t.actions,reset:t.reset,nextState:t.nextState}}});
//# sourceMappingURL=index.umd.js.map
