!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("react")):"function"==typeof define&&define.amd?define(["exports","react"],e):e(t.reactCreateUseStore={},t.react)}(this,function(t,e){var n=0,r=[];t.createStore=function(t){var e=t.state;void 0===e&&(e={});var o=t.actions;void 0===o&&(o={});var i=t.autoReset;void 0===i&&(i=!1);var a=t.onFirstUse;void 0===a&&(a=function(){});var u=t.afterFirstMount;void 0===u&&(u=function(){});var c=t.afterEachMount;void 0===c&&(c=function(){});var s=t.afterEachUnmount;void 0===s&&(s=function(){});var f=t.afterLastUnmount;void 0===f&&(f=function(){});var d=t.onMiddlewareError;void 0===d&&(d=function(){});var v=t.id;void 0===v&&(v=null);var l=[],p={id:String(v||"store-"+n),idx:n,reset:function(){return h(e)},addActions:b,state:e,setState:h,actions:{},_subscribe:function(t){0==p._usedCount++&&a(p),0===l.length&&u(p),-1===l.indexOf(t)&&(l.push(t),c(p))},_unsubscribe:function(t){l=l.filter(function(e){return e!==t}),s(p),0===l.length&&(i&&p.reset(),f(p))},_usedCount:0};return n++,b(o),p;function b(t){Object.keys(t).forEach(function(n){var o=t[n];p.actions[n]=function(){for(var t=[],i=arguments.length;i--;)t[i]=arguments[i];var a=0,u=function(){var i=r[++a-1];if(i){var c={store:p,action:o,name:n,args:t};try{i(c,u)}catch(t){var s={error:t,middleware:i,input:c};console.error('react-create-use-store: middleware failed during action "'+n+'."',s),d(s)}}else o.apply(void 0,[[e,h]].concat(t))};u()}})}function h(t){"function"==typeof t&&(t=t(p.state)),p.state=t,l.forEach(function(e){return e(t)})}},t.addMiddleware=function(t){r.push(t)},t.removeMiddleware=function(t){var e=r.indexOf(t);e>-1&&r.splice(e,1)},t.useStore=function(t){var n=e.useState(t.state)[1];return e.useDebugValue(t),e.useEffect(function(){return t._subscribe(n),function(){return t._unsubscribe(n)}},[t]),{state:t.state,actions:t.actions,reset:t.reset}}});
//# sourceMappingURL=index.umd.js.map
