import{useState as t,useEffect as n,useDebugValue as o}from"react";var r=1;function e(t){var n=t.state;void 0===n&&(n={});var o=t.actions;void 0===o&&(o={});var e=t.autoReset;void 0===e&&(e=!1);var i=t.onFirstUse;void 0===i&&(i=function(){});var u=t.afterFirstMount;void 0===u&&(u=function(){});var a=t.afterEachMount;void 0===a&&(a=function(){});var c=t.afterEachUnmount;void 0===c&&(c=function(){});var s=t.afterLastUnmount;void 0===s&&(s=function(){});var f=t.id;void 0===f&&(f=null);var v=[],d={reset:function(){return h(n)},addActions:b,state:n,setState:h,actions:{},id:String(f||"store-"+r),idx:r++,_subscribe:function(t){0==d._usedCount++&&i(d),0===v.length&&u(d),-1===v.indexOf(t)&&(v.push(t),a(d))},_unsubscribe:function(t){v=v.filter(function(n){return n!==t}),c(d),0===v.length&&(e&&d.reset(),s(d))},_usedCount:0};return b(o),d;function b(t){Object.keys(t).forEach(function(o){var r=t[o];d.actions[o]=function(){for(var t=[],o=arguments.length;o--;)t[o]=arguments[o];r.apply(void 0,[[n,h]].concat(t))}})}function h(t){"function"==typeof t&&(t=t(d.state)),d.state=t,v.forEach(function(n){return n(t)})}}function i(r){var e=t(r.state)[1];return o(r),n(function(){return r._subscribe(e),function(){return r._unsubscribe(e)}},[r]),{state:r.state,actions:r.actions,reset:r.reset}}export{e as createStore,i as useStore};
//# sourceMappingURL=index.mjs.map
