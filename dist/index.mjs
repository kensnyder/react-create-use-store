import{useState as t,useEffect as n,useDebugValue as r}from"react";var e=0,o=[];function i(t){var n=t.state;void 0===n&&(n={});var r=t.actions;void 0===r&&(r={});var i=t.autoReset;void 0===i&&(i=!1);var a=t.onFirstUse;void 0===a&&(a=function(){});var u=t.afterFirstMount;void 0===u&&(u=function(){});var c=t.afterEachMount;void 0===c&&(c=function(){});var s=t.afterEachUnmount;void 0===s&&(s=function(){});var f=t.afterLastUnmount;void 0===f&&(f=function(){});var v=t.onMiddlewareError;void 0===v&&(v=function(){});var d=t.id;void 0===d&&(d=null);var l=[],h={id:String(d||"store-"+e),idx:e,reset:function(){return p(n)},addActions:b,state:n,setState:p,actions:{},_subscribe:function(t){0==h._usedCount++&&a(h),0===l.length&&u(h),-1===l.indexOf(t)&&(l.push(t),c(h))},_unsubscribe:function(t){l=l.filter(function(n){return n!==t}),s(h),0===l.length&&(i&&h.reset(),f(h))},_usedCount:0};return e++,b(r),h;function b(t){Object.keys(t).forEach(function(r){var e=t[r];h.actions[r]=function(){for(var t=[],i=arguments.length;i--;)t[i]=arguments[i];var a=0,u=function(){var i=o[++a-1];if(i){var c={store:h,action:e,name:r,args:t};try{i(c,u)}catch(t){var s={error:t,middleware:i,input:c};console.error('react-create-use-store: middleware failed during action "'+r+'."',s),v(s)}}else e.apply(void 0,[[n,p]].concat(t))};u()}})}function p(t){"function"==typeof t&&(t=t(h.state)),h.state=t,l.forEach(function(n){return n(t)})}}function a(t){o.push(t)}function u(t){var n=o.indexOf(t);n>-1&&o.splice(n,1)}function c(e){var o=t(e.state)[1];return r(e),n(function(){return e._subscribe(o),function(){return e._unsubscribe(o)}},[e]),{state:e.state,actions:e.actions,reset:e.reset}}export{i as createStore,a as addMiddleware,u as removeMiddleware,c as useStore};
//# sourceMappingURL=index.mjs.map
