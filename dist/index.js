var t=require("react"),e=1;exports.createStore=function(t){var n=t.state,o=void 0===n?{}:n,u=t.actions,r=t.autoReset,i=void 0!==r&&r,s=t.onFirstUse,c=void 0===s?function(){}:s,a=t.afterFirstMount,f=void 0===a?function(){}:a,d=t.afterEachMount,v=void 0===d?function(){}:d,h=t.afterEachUnmount,b=void 0===h?function(){}:h,l=t.afterLastUnmount,x=void 0===l?function(){}:l,S=t.id,p=[],_=[],g={reset:function(){return E(o)},state:o,setState:E,nextState:function(){return new Promise(function(t){_.push(t)})},actions:void 0===u?{}:u,id:String((void 0===S?null:S)||"store-"+e),idx:e++,_subscribe:function(t){0==g._usedCount++&&c(),0===p.length&&f(),-1===p.indexOf(t)&&(p.push(t),v())},_unsubscribe:function(t){var e=p.indexOf(t);e>-1&&p.splice(e,1),b(),0===p.length&&(i&&g.reset(),x())},_usedCount:0};return g;function E(t){"function"==typeof t&&(t=t(g.state)),Promise.resolve().then(function(){g.state=t,p.forEach(function(t){return t(g.state)}),_.forEach(function(t){return t(g.state)}),_.length=0}).catch(function(t){throw t})}},exports.useStore=function(e){var n=t.useState(e.state)[1];return t.useDebugValue(e),t.useEffect(function(){return e._subscribe(n),function(){return e._unsubscribe(n)}},[e]),{state:e.state,actions:e.actions,reset:e.reset,nextState:e.nextState}};
//# sourceMappingURL=index.js.map
