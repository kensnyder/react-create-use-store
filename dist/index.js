var t=require("react"),e=1;exports.createStore=function(t){var n=t.state;void 0===n&&(n={});var r=t.actions;void 0===r&&(r={});var u=t.autoReset;void 0===u&&(u=!1);var o=t.onFirstUse;void 0===o&&(o=function(){});var i=t.afterFirstMount;void 0===i&&(i=function(){});var s=t.afterEachMount;void 0===s&&(s=function(){});var a=t.afterEachUnmount;void 0===a&&(a=function(){});var c=t.afterLastUnmount;void 0===c&&(c=function(){});var f=t.id;void 0===f&&(f=null);var v=[],d=[],h={reset:function(){return b(n)},state:n,setState:b,nextState:function(){return new Promise(function(t){d.push(t)})},actions:r,id:String(f||"store-"+e),idx:e++,_subscribe:function(t){0==h._usedCount++&&o(),0===v.length&&i(),-1===v.indexOf(t)&&(v.push(t),s())},_unsubscribe:function(t){v=v.filter(function(e){return e!==t}),a(),0===v.length&&(u&&h.reset(),c())},_usedCount:0};return h;function b(t){"function"==typeof t&&(t=t(h.state)),Promise.resolve().then(function(){h.state=t,v.forEach(function(t){return t(h.state)}),d.forEach(function(t){return t(h.state)}),d=[]}).catch(function(t){throw t})}},exports.useStore=function(e){var n=t.useState(e.state)[1];return t.useDebugValue(e),t.useEffect(function(){return e._subscribe(n),function(){return e._unsubscribe(n)}},[e]),{state:e.state,actions:e.actions,reset:e.reset,nextState:e.nextState}};
//# sourceMappingURL=index.js.map
